<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Nominate a young achiever at the University of Benin for the TOYP UNIBEN Award. Celebrate outstanding individuals making a difference."
    />
    <title>Nominate - TOYP UNIBEN</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="nomination.css" />
  </head>
  <body>
    <header>
      <div class="logo">
        <img src="images/toyp-logo.png" alt="TOYP UNIBEN Logo" />
      </div>
      <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="nomination.html">Nominate</a></li>
          <li><a href="vote.html">Vote</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </header>

    <section class="nominate fade-in">
      <h1>Nominate a Young Achiever for TOYP UNIBEN</h1>
      <p>
        The TOYP UNIBEN awards recognizes exceptional young individuals at the
        University of Benin. Nominate someone (Undergraduate) who exemplifies
        leadership innovation or social impact for this prestigious recognition.
      </p>

      <div class="nomination-forms">
        <h2>Nomination Form</h2>
        <p>Please fill in the form below to nominate a candidate:</p>

        <form id="nomination-form">
          <label for="nominee-name">Name of Nominee:</label>
          <input type="text" id="nominee-name" name="nominee-name" required />

          <label for="nominee-email">Email of Nominee:</label>
          <input
            type="email"
            id="nominee-email"
            name="nominee_email"
            required
          />

          <label for="nominator-email">Your Email:</label>
          <input
            type="email"
            id="nominator-email"
            name="nominator_email"
            placeholder="example@email.com"
            required
          />

          <label for="gender">Gender of Nominee:</label>
          <select id="gender" name="gender" required>
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>

          <label for="whatsapp-contact">WhatsApp Contact of Nominee:</label>
          <input
            type="text"
            id="whatsapp-contact"
            name="whatsapp_contact"
            required
          />

          <label for="other-contact">Other Contact of Nominee:</label>
          <input type="text" id="other-contact" name="other_contact" />

          <label for="faculty">Faculty of Nominee:</label>
          <select id="faculty" name="faculty" required>
            <option value="">Select Faculty</option>
            <option value="Faculty of Arts">Faculty of Arts</option>
            <option value="Faculty of Agriculture">
              Faculty of Agriculture
            </option>
            <option value="Basic Medical science">Basic Medical science</option>
            <option value="School of Dentistry">School of Dentistry</option>
            <option value="Faculty of Education">Faculty of Education</option>
            <option value="Faculty of Engineering">
              Faculty of Engineering
            </option>
            <option value="Faculty of Environmental science">
              Faculty of Environmental science
            </option>
            <option value="Faculty of Law">Faculty of Law</option>
            <option value="Faculty of Management science">
              Faculty of Management science
            </option>
            <option value="Faculty of Pharmacy">Faculty of Pharmacy</option>
            <option value="Faculty of Physical science">
              Faculty of Physical science
            </option>
            <option value="Faculty of Social science">
              Faculty of Social science
            </option>
            <option value="School of Medical science">
              School of Medical science
            </option>
            <option value="College of Medicine">College of Medicine</option>
            <option value="Veterinary Medicine">Veterinary Medicine</option>
            <option value="Faculty of Life Science">
              Faculty of Life Science
            </option>
            <option value="Other">Other</option>
          </select>

          <label for="department">Department of Nominee:</label>
          <input type="text" id="department" name="department" required />

          <label for="level">Level of Nominee:</label>
          <input type="text" id="level" name="level" required />

          <label for="category">Category:</label>
          <select id="category" name="category" required>
            <option value="">Select Category</option>
            <option value="Business and Entrepreneurship Excellence">
              Business and Entrepreneurship Excellence
            </option>
            <option value="Political & Governance Impact">
              Political & Governance Impact
            </option>
            <option value="Academic and Intellectual Achievements">
              Academic and Intellectual Achievements
            </option>
            <option value="Art & Creative Innovation">
              Art & Creative Innovation
            </option>
            <option value="Sports Achievement">Sports Achievement</option>
            <option value="Voluntary Leadership and Humanitarian services">
              Voluntary Leadership and Humanitarian services
            </option>
            <option value="Personal Development and Self improvement">
              Personal Development and Self improvement
            </option>
            <option value="Health & Medical Impact">
              Health & Medical Impact
            </option>
            <option value="Social & Community Influence">
              Social & Community Influence
            </option>
            <option value="Digital Media Presence">
              Digital Media Presence
            </option>
          </select>

          <label for="social-media-handle"
            >Social Media Handle of Nominee:</label
          >
          <input
            type="text"
            id="social-media-handle"
            name="social_media_handle"
            placeholder="@yourhandle"
            required
          />

          <label for="reason">Reason for Nomination:</label>
          <textarea id="reason" name="reason" rows="4" required></textarea>

          <button type="submit" id="submit-button">Submit Nomination</button>
        </form>
        <!-- <div
          id="confirmation-message"
          style="
            display: none;
            color: green;
            text-align: center;
            margin-top: 20px;
          "
        >
          <h3>Thank you for your nomination!</h3>
          <p>
            Your submission has been successfully received. The nominee will be
            contacted soon.
          </p> -->
      </div>
    </section>
    <script>
      const form = document.getElementById("nomination-form"); // Make sure your form has id="nomination-form"
      const submitButton = document.getElementById("submit-button");

      // IMPORTANT: Replace this with your actual Google Apps Script Web App URL
      const APP_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbyI5M5DSfTK_cS8sAOB6l1T1J4VMF2dicJkJYmLKMAoLrCeZ7lbMM6xqI3U822DInCK/exec";

      // Redirect URLs
      const SUCCESS_PAGE_URL =
        "https://jcin-uniben-toyp-25.vercel.app/thankuu.html";
      const DUPLICATE_PAGE_URL =
        "https://jcin-uniben-toyp-25.vercel.app/sub.html";

      form.addEventListener("submit", async (event) => {
        event.preventDefault(); // Prevent default form submission

        submitButton.disabled = true; // Disable button to prevent multiple submissions
        submitButton.textContent = "Submitting..."; // Change button text

        // Collect form data
        const formData = new FormData(form);
        const formDataObject = {};
        formData.forEach((value, key) => {
          formDataObject[key] = value;
        });

        try {
          const response = await fetch(APP_SCRIPT_URL, {
            method: "POST",
            // Important for CORS: use 'cors' mode and ensure Apps Script sends proper CORS headers
            mode: "cors",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded", // This matches how Apps Script expects e.parameter
            },
            body: new URLSearchParams(formDataObject).toString(), // Convert object to URL-encoded string
          });

          // Check if the network request itself was successful (e.g., no 404, 500 status from Apps Script host)
          if (!response.ok) {
            const errorText = await response.text();
            console.error(
              "Apps Script responded with non-OK status:",
              response.status,
              errorText
            );
            alert(
              "Server error (" +
                response.status +
                "). Please try again or contact support."
            );
            return; // Exit if response not OK
          }

          // Parse the JSON response from Apps Script
          const data = await response.json(); // Use .json() directly as Apps Script sets Content-Type: application/json

          console.log("Parsed response from Apps Script:", data);

          if (data.status === "success") {
            window.location.href = SUCCESS_PAGE_URL;
          } else if (data.status === "duplicate") {
            window.location.href = DUPLICATE_PAGE_URL;
          } else {
            // This handles 'error' status from Apps Script
            alert(
              "An unexpected error occurred: " +
                (data.message || "Unknown response from server.")
            );
            console.error("Unexpected status from Apps Script:", data);
          }
        } catch (error) {
          console.error("Submission error:", error);
          alert(
            "A network or parsing error occurred during submission. Please try again. If the issue persists, contact support."
          );
        } finally {
          submitButton.disabled = false;
          submitButton.textContent = "Submit Nomination";
        }
      });
    </script>

    <footer>
      <div class="footer-content">
        <div class="social-media">
          <h3>Follow JCIN UNIBEN</h3>
          <a href="c" id="linkedin"
            ><img src="images\social-linkedin-Photoroom.png" alt="Linkedin"
          /></a>

          <a href="https://www.facebook.com/Unibenjaycees" id="facebook"
            ><img src="images\social-facebook-Photoroom.png" alt="Facebook"
          /></a>
          <a
            href=" https://x.com/jci_uniben?t=PW5pwe7JdM_OeKftgZ5EzA&s=09
          "
            id="twitter"
            ><img src="images\social-twitter-Photoroom.png" alt="Twitter"
          /></a>
          <a
            href="https://www.tiktok.com/@jcinuniben?_t=ZM-8uil8rzDjOv&_r=1"
            id="tiktok"
            ><img src="images\social-tiktok-Photoroom.png" alt="TikTok"
          /></a>
        </div>
        <div class="footer-logo">
          <img
            src="images\jcin-uniben-logo-Photoroom.png"
            alt="JCIN UNIBEN Logo"
          />
        </div>
        <div class="footer-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="vote.html">Vote</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      <p>&copy; 2025 TOYP UNIBEN | Powered by JCIN UNIBEN</p>
    </footer>

    <script src="main.js"></script>
  </body>
</html>
